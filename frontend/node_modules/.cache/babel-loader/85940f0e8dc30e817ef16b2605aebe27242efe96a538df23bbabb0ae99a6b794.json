{"ast":null,"code":"import { userUpdateProfileSlice, userDetailSlice, userLoginSlice, userRegisterSlice } from \"../reducers/userSlice\";\nimport axios from \"axios\";\nexport const login = (email, password) => async dispatch => {\n  try {\n    dispatch(userLoginSlice.actions.Request());\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post('http://127.0.0.1:8000/api/users/login/', {\n      'username': email,\n      'password': password\n    }, config);\n    dispatch(userLoginSlice.actions.Success(data));\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch(userLoginSlice.actions.Fail(error.response && error.response.data.detail ? error.response.data.detail : error.message));\n  }\n};\nexport const logout = () => async dispatch => {\n  localStorage.removeItem('userInfo');\n  dispatch(userLoginSlice.actions.Logout());\n  dispatch(userRegisterSlice.actions.Logout());\n};\nexport const register = (name, email, password) => async dispatch => {\n  try {\n    dispatch(userRegisterSlice.actions.Request());\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post('http://127.0.0.1:8000/api/users/register/', {\n      'name': name,\n      'email': email,\n      'password': password\n    }, config);\n    dispatch(userRegisterSlice.actions.Success(data));\n    dispatch(userLoginSlice.actions.Success(data));\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch(userRegisterSlice.actions.Fail(error.response && error.response.data.detail ? error.response.data.detail : error.message));\n  }\n};\nexport const getUserDetail = id => async (dispatch, getState) => {\n  try {\n    dispatch(userDetailSlice.actions.Request());\n    const userInfo = getState().userLogin.userInfo;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.get(`http://127.0.0.1:8000/api/users/${id}`, config);\n    dispatch(userDetailSlice.actions.Success(data));\n  } catch (error) {\n    dispatch(userDetailSlice.actions.Fail(error.response && error.response.data.detail ? error.response.data.detail : error.message));\n  }\n};\nexport const updateUserProfile = user => async (dispatch, getState) => {\n  try {\n    dispatch(userUpdateProfileSlice.actions.Request());\n    const userInfo = getState().userLogin.userInfo;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.put(`http://127.0.0.1:8000/api/users/profile/update/`, user, config);\n    dispatch(userUpdateProfileSlice.actions.Success(data));\n    dispatch(userLoginSlice.actions.Success(data));\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch(userUpdateProfileSlice.actions.Fail(error.response && error.response.data.detail ? error.response.data.detail : error.message));\n  }\n};","map":{"version":3,"names":["userUpdateProfileSlice","userDetailSlice","userLoginSlice","userRegisterSlice","axios","login","email","password","dispatch","actions","Request","config","headers","data","post","Success","localStorage","setItem","JSON","stringify","error","Fail","response","detail","message","logout","removeItem","Logout","register","name","getUserDetail","id","getState","userInfo","userLogin","Authorization","token","get","updateUserProfile","user","put"],"sources":["D:/Desktop/ECOMMERCE/frontend/src/actions/userActions.js"],"sourcesContent":["import { userUpdateProfileSlice, userDetailSlice, userLoginSlice, userRegisterSlice } from \"../reducers/userSlice\"\r\nimport axios from \"axios\";\r\n\r\nexport const login = (email, password) => async (dispatch) => {\r\n    try{\r\n        dispatch(userLoginSlice.actions.Request());\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }\r\n        const { data } = await axios.post('http://127.0.0.1:8000/api/users/login/',\r\n        {'username': email, 'password': password}, config);\r\n\r\n        dispatch(userLoginSlice.actions.Success(data));\r\n\r\n        localStorage.setItem('userInfo', JSON.stringify(data));\r\n\r\n    }catch(error)\r\n    {\r\n        dispatch(userLoginSlice.actions.Fail(\r\n            error.response && error.response.data.detail\r\n            ? error.response.data.detail\r\n            : error.message\r\n        ));\r\n    }\r\n}\r\nexport const logout = () => async (dispatch) => {\r\n    localStorage.removeItem('userInfo');\r\n    dispatch(userLoginSlice.actions.Logout());\r\n    dispatch(userRegisterSlice.actions.Logout());\r\n}\r\n\r\n\r\nexport const register = (name, email, password) => async (dispatch) => {\r\n    try\r\n    {\r\n        dispatch(userRegisterSlice.actions.Request());\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }\r\n        const { data } = await axios.post('http://127.0.0.1:8000/api/users/register/',\r\n        {'name': name, 'email': email, 'password': password}, config);\r\n\r\n        dispatch(userRegisterSlice.actions.Success(data));\r\n        dispatch(userLoginSlice.actions.Success(data));\r\n\r\n        localStorage.setItem('userInfo', JSON.stringify(data));\r\n    }\r\n    catch(error)\r\n    {\r\n        dispatch(userRegisterSlice.actions.Fail(\r\n            error.response && error.response.data.detail\r\n            ? error.response.data.detail\r\n            : error.message\r\n        ));\r\n    }\r\n}\r\n\r\nexport const getUserDetail = (id) => async (dispatch, getState) => {\r\n    try\r\n    {\r\n        dispatch(userDetailSlice.actions.Request());\r\n\r\n        const userInfo = getState().userLogin.userInfo;\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        }\r\n        const { data } = await axios.get(`http://127.0.0.1:8000/api/users/${id}`, config);\r\n\r\n        dispatch(userDetailSlice.actions.Success(data));\r\n    }\r\n    catch(error)\r\n    {\r\n        dispatch(userDetailSlice.actions.Fail(\r\n            error.response && error.response.data.detail\r\n            ? error.response.data.detail\r\n            : error.message\r\n        ));\r\n    }\r\n}\r\n\r\nexport const updateUserProfile = (user) => async (dispatch, getState) => {\r\n    try\r\n    {\r\n        dispatch(userUpdateProfileSlice.actions.Request());\r\n\r\n        const userInfo = getState().userLogin.userInfo;\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        }\r\n        const { data } = await axios.put(`http://127.0.0.1:8000/api/users/profile/update/`,user, config);\r\n\r\n        dispatch(userUpdateProfileSlice.actions.Success(data));\r\n        dispatch(userLoginSlice.actions.Success(data));\r\n        localStorage.setItem('userInfo', JSON.stringify(data));\r\n    }\r\n    catch(error)\r\n    {\r\n        dispatch(userUpdateProfileSlice.actions.Fail(\r\n            error.response && error.response.data.detail\r\n            ? error.response.data.detail\r\n            : error.message\r\n        ));\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}